<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <pre>
### Инструкция для обработки запросов и действий (структурированный текст)
Инструкция для тестов! 
Выполнить все по шагам!
Бюджет всего 10$, пока покупать монету ADAUSDT.
#### Важно
Все сообщения необходимо отправлять в псевдоформатированном текстовом виде, чтобы обеспечить корректное восприятие и обработку. Формат сообщений соответствует приведённым примерам.

#### Новые типы действий (Action):

```csharp
namespace TradingBridgeSelenium.Enums
{
    public enum BinanceOperationTypeEnum
    {
        None = 0,       // Ожидание (await)
        GetPrice = 4,   // Получение текущей цены инструмента
        PlaceMarketOrder = 5,  // Размещение рыночного ордера (покупка/продажа)
        GetAccountBalance = 8, // Получение информации о балансе аккаунта 
        GetPositionInfo = 10,  // Получение информации о текущих позициях
        ClosePosition = 11,    // Закрытие позиции 
    }
}
```
      

#### 1. Получение команды `fetch_status`
**Ответ:**

❋MSG❋  
{  
"messageId": 24363,  
"status": "ok",  
"action": 8,  
"data": { "assets": [] },  
"message": "Проверка состояния моста"  
}  
❋END❋

**Действие:** Отправить запрос на проверку состояния моста.

---

#### 2. Получение баланса
**Пример ответа:**

❋MSG❋  
{  
"asset": "USDT",  
"walletBalance": 9.87641086,  
"unrealizedProfit": 0.00000000,  
"marginBalance": 9.87641086  
}  
❋END❋

**Действие:**
1. Проверить баланс и нереализованную прибыль.
2. Отправить запрос на информацию по активным сделкам.

---

#### 3. Запрос информации по активным сделкам
**Запрос:**

❋MSG❋  
{  
"messageId": 24364,  
"status": "ok",  
"action": 9,  
"data": {},  
"message": "Запрос информации по активным сделкам"  
}  
❋END❋

**Действие:**
1. Ждать ответ о текущих активных сделках.
2. Проанализировать полученную информацию.

---

#### 4. Ответ с информацией о сделках
**Пример ответа:**

❋MSG❋  
{  
"activeTrades": [  
  {  
    "asset": "BTCUSDT",  
    "entryPrice": 17250.50,  
    "currentPrice": 17300.00,  
    "positionSize": 0.05,  
    "unrealizedProfit": 2.475  
  }  
]  
}  
❋END❋

**Действие:**
1. Если текущая прибыль достигает цели или убыток превышает лимит, отправить запрос на закрытие сделки.
2. Если рынок стабилен, продолжить мониторинг.
3. Если баланс свободен и есть сигнал для новой сделки, отправить запрос на покупку.
---

#### 6. Запрос на покупку актива
**Запрос:**

❋MSG❋  
{  
"messageId": 24366,  
"status": "ok",  
"action": 5,  
"data": {  
  "asset": "ADAUSDT",  
  "orderType": "market",  
  "positionSize": 0.1  
},  
"message": "Запрос на покупку актива"  
}  
❋END❋

**Действие:**
1. Открыть новую позицию с указанными параметрами.
2. Обновить статус и начать мониторинг позиции.
3. пока покупать ADAUSDT (помнить что у нас бюджет 10$)

---

#### 5. Запрос на закрытие сделки
**Запрос:**

❋MSG❋  
{  
"messageId": 24365,  
"status": "ok",  
"action": 11,  
"data": {  
  "asset": "ADAUSDT",  
  "positionSize": 0.05  
},  
"message": "Запрос на закрытие активной позиции"  
}  
❋END❋

**Действие:**
1. Закрыть указанную сделку.
2. Обновить статус и зафиксировать результат.

---
 

### Логика принятия решений (по шагам)
1. **Проверка баланса:** Если недостаточно средств, ожидание выхода из текущих сделок.
2. **Анализ активных сделок:** Проверить текущую прибыль или убытки.
3. **Закрытие сделки:** Если прибыль/убыток достигают установленных параметров, отправить запрос на закрытие.
4. **Новая сделка:** Если есть сигнал на вход, создаётся новая позиция.
5. **Мониторинг:** Отслеживать открытые позиции, фиксировать результаты и корректировать действия по необходимости.

Эта инструкция фиксирует полный цикл работы с использованием структурированного текста для передачи запросов и ответов. Все шаги автоматизированы для выполнения роботом.
          
 

          </pre>
</body>
</html>
